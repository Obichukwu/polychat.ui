<!DOCTYPE html>
<html lang="en" >
    <head>
        <meta charset="utf-8" />
        <title>Polychat</title>
        <meta name="description" content="flamez is an educational based social networking application platform.">
        <meta name="author" content="Alexius Odalonu">
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" href="css/normalize.css" />
        <link rel="stylesheet" href="css/foundation.min.css" />
        <link rel="stylesheet" href="css/foundicons.css" />
        <link rel="stylesheet" href="css/crystal.css" />
        <script type="text/javascript" src="cordova.js"></script>
    </head>
	<body id="emberApp">
        
        <script type="text/javascript" src="js/vendor/jquery.min.js"></script>
        <script type="text/javascript" src="js/vendor/handlebars.1.0.rc4.js"></script>
        <script type="text/javascript" src="js/vendor/ember.js"></script>
        <script type="text/javascript" src="js/vendor/ember.fastclick.js"></script>
        <script type="text/javascript" src="js/vendor/moment.min.js"></script>

        <script type="text/javascript" src="js/initialzr.js"></script>
        <script type="text/javascript" src="js/models/store.js"></script>
        <script type="text/javascript" src="js/models/models.js"></script>

        <script type="text/javascript" src="js/router.js"></script>
        <script type="text/javascript" src="js/controllers/account.js"></script>
        <script type="text/javascript" src="js/controllers/admin.js"></script>
        <script type="text/javascript" src="js/controllers/user.js"></script>
        <script type="text/javascript">
            document.addEventListener('deviceready', window.onDeviceReady, false);
        </script>

        <script type="text/x-handlebars" id="application">
        <div id="header" class="fixed">
		    <div class="row">
                <div class="small-3 columns text-left"><a class="btn toggle-menu"><i class="foundicon-settings"></i></a></div>
			    <div class="small-6 columns text-center"><img class="logo" src="logo.png" alt="b" style="width:252px; height:46px;" /></div>
                <div class="small-3 columns text-right"></div>
		    </div>
	    </div>

	    <div class="wrapper">
		    <div class="inner">
			    <nav>
				    <ul id="nav-list">
                        {{partial 'menu'}} 
				    </ul>
			    </nav>

			    <div class="main-content">
				    <div id="content" class="row">
                        <div class="large-12 columns">
                            {{outlet}}   
                        </div>
				    </div>	

	                <div id="footer">
                        <div id="content" class="row">
                            <div class="large-12 columns">
		                        <p class="credit">&copy Crystal Solutions 2013 &mdash; <a href="http://designs.nervlite.com">Nervlite Designs</a></p>
                            </div>
				        </div>
	                </div>
			    </div>
		    </div>
	    </div>
        </script>

        <script type="text/x-handlebars" id="feeds">
            <h2>Feeds</h2>
            <div class="row">
                <div class="large-12 columns">
                    {{view Ember.TextArea placeholder="Shout out to the world!" valueBinding="newPost"}}
                    {{#if newPostError}} <small class="error">Error, Correct and retry.</small> {{/if}}
                </div>
                <div class="large-12 columns text-right">
                    <button {{action "postNew"}} class="button small radius">Post</button> 
                </div>
            </div>

            {{#if controller.dataLoaded}}
            <div class="row">
                <div class="large-12 columns">
                    <ul class="no-bullet">
                    {{#each post in controller}}
                        <li>
                            <img/>
                            <div class="postTitle">{{post.title}}
                                <span>{{moment_date post.postDate}}</span>
                            </div>
                            <div class="postContent">
                                {{#if post.isTextContent}}
                                    {{post.content}}
                                {{else}}
                                    <img src="data:image/png;base64,{{post.content}}" />
                                {{/if}}
                            </div>
                        </li>
                    {{else}}
                        <li>
                            <p>No Post Exits. Create one</p>
                        </li>
                    {{/each}}
                    </ul>
                </div>
            </div>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>
        
        <script type="text/x-handlebars" id="user">
            <h2>Account Info</h2>
            {{outlet}}
        </script>

        <script type="text/x-handlebars" id="user/index">
            <p>About Me</p>
            <div class="panel">
                <p>Profile Info</p>
            </div>
        </script>

        <script type="text/x-handlebars" id="user/password">
            <p>Change Password</p>
            <div class="panel">
                <p>change password</p>
            </div>
        </script>

        <script type="text/x-handlebars" id="messages">
            <h2>Messages</h2>
            {{#if controller.dataLoaded}}
            <div class="row">
                <div class="large-12 columns">
                    <ul class="no-bullet">
                    {{#each message in controller}}
                        <li>
                            <div class="postTitle">Conversation Between {{message.participant1}} and {{message.participant2}}
                                <span>{{moment_date message.lastMessageDate}}</span>
                            </div>
                        </li>
                    {{else}}
                        <li>
                            <p>No Private Conversation. Add a friend to create one.</p>
                        </li>
                    {{/each}}
                    </ul>
                </div>
            </div>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}        
        </script>

        <script type="text/x-handlebars" id="friends">
            <h2>Friends</h2>
            <div class="panel">
                <p>Lorem ipsum dolor sit amet, cosecteturellus aliquet tellus.</p>
		        <p>Lorem ipsum dolor sit amet, consecteNullam dictum sem sapien, eu 
		        Integer imperdiet consequat nisi a faucibus. Phasellus aliquet tellus.</p>
            </div>
        </script>

        <script type="text/x-handlebars" id="chats">
            <h2>Chat</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum 
		    Integer imperdiet consequat nisi a faucibus. Phasellus aliquet tellus.</p>
		    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum 
		    pulvinar malesuada lacus luctus sit amet. Nullam dictum sem sapien, eu 
		    Integer imperdiet consequat nisi a faucibus. Phasellus aliquet tellus.</p>
        </script>
        

        <script type="text/x-handlebars" id="about">
            <h2>About</h2>
            <div class="panel">
                <p>Look all around you, there exists various social network platforms that engages you and occupy your time.</p>
                <p>If you find yourself asking this question "what had social network give to me?"</p>
                <p>This app is for you. This is the education revolution!</p>
            </div>
        </script>

        <script type="text/x-handlebars" id="index">
            <h2 class="heading">Accounts {{#unless viewMode}} Login {{else}} Register {{/unless}}</h2>
            {{#unless viewMode}}
                <p>Enter username and password to gain access to the system.</p>
                <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Email</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Email Address" valueBinding="content.email"}}
                            {{#if content.emailError}} <small class="error">Invalid Email Address</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="content.password" type="password"}}
                            {{#if content.passwordError}} <small class="error">Invalid Password</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <button {{action "SwitchView" 1 target="controller"}} class="button radius" >Register</button>
                            <button {{action "login"}} class="button radius" >Login</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <button {{action "easyLogin" 1}} class="button radius">Easy Admin</button>
                            <button {{action "easyLogin" 2}} class="button radius">Easy User</button>
                        </div>
                    </div>
                </form>    
            {{else}}
                <p>Enter all information to create a account.</p>
                <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Email</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Email Address" valueBinding="content.email"}}
                            {{#if content.emailError}} <small class="error">Invalid Email Address</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="content.password" type="password"}}
                            {{#if content.passwordError}} <small class="error">Invalid Password</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Confirm Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="content.password2" type="password"}}
                            {{#if content.password2Error}} <small class="error">Password did not match</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Department</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="controller.departments" optionValuePath="content.id" optionLabelPath="content.title"
                                valueBinding="content.departmentId" prompt="Please select your department"}}
                            {{#if content.departmentIdError}} <small class="error">Please select a valid department</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Firstname </span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Firstname" valueBinding="content.firstName"}}
                            {{#if content.firstNameError}} <small class="error">Invalid Firstname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Lastname</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Lastname" valueBinding="content.lastName"}}
                            {{#if content.lastNameError}} <small class="error">Invalid Lastname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Sex</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="gender" valueBinding="content.sex" prompt="Please select your sex"}}
                            {{#if content.sexError}} <small class="error">Invalid Sex</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">About</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextArea placeholder="About Me" valueBinding="content.about"}}
                            {{#if content.aboutError}} <small class="error">Invalid About details</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <button {{action "SwitchView" 0 target="controller"}} class="button radius" >Login</button>
                            <button {{action "register"}} class="button radius">Register</button>
                        </div>
                    </div>
                </form>
            {{/unless}}
        </script>

        <script type="text/x-handlebars" id="admin">
            <h2>Administrator's Section</h2>            
            {{outlet}}
        </script>

        <script type="text/x-handlebars" id="admin/faculties">
            {{#if controller.dataLoaded }}
                <button {{action "create" target="controller"}} class="button radius">Create</button>
                <ul class="no-bullet">
                {{#each faculty in controller}}
                <li >
                    {{#if faculty.isEditing }}
                    <form>
                        <div class="row">
                          <div class="large-12 columns">
                            <label>Title</label>
                            {{view Ember.TextField placeholder="title" valueBinding="controller.editTitle"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                            <label>Description</label>
                            {{view Ember.TextArea placeholder="description" valueBinding="controller.editDescription"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                              <button {{action "save" faculty target="controller" }} class="button radius" >Save</button>
                              <button {{action "cancel" faculty target="controller" }} class="button radius">Cancel</button>
                          </div>
                        </div>
                    </form>
                    {{else}}
                        <h3>{{faculty.title}} </h3>
                        <p>{{faculty.description}} </p>   
                        <button {{action "edit" faculty target="controller"}} class="button radius">Edit</button> 
                        <button {{action "remove" faculty target="controller"}} class="button radius">Delete</button>
                    {{/if}}
                </li>
                {{else}}
                    <li>
                        <p>No Faculty Exits. Create one</p>
                    </li>
                {{/each}}
                </ul>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="admin/departments">
            {{#if controller.dataLoaded }}
                <button {{action "create" target="controller"}} class="button radius">Create</button>
                {{#unless controller.content }}
                    <div class="panel">
                        <p>No Department Exits. Create one</p>
                    </div>
                {{/unless  }}
                {{#each department in controller}}
                <div class="panel">
                    {{#if department.isEditing }}
                    <form>
                        <div class="row">
                          <div class="large-12 columns">
                            <label>Faculty </label>
                            {{view Ember.Select contentBinding="controller.faculties" optionValuePath="content.id" optionLabelPath="content.title"
                                valueBinding="controller.editFacultyId"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                            <label>Title</label>
                            {{view Ember.TextField placeholder="title" valueBinding="controller.editTitle"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                            <label>Description</label>
                            {{view Ember.TextArea placeholder="description" valueBinding="controller.editDescription"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                              <button {{action "save" department target="controller" class="button radius"}} >Save</button>
                              <button {{action "cancel" department target="controller" class="button radius"}} >Cancel</button>
                          </div>
                        </div>
                    </form>
                    {{else}}
                        <h3> {{department.title}} ({{department.facultyTitle}})</h3>
                        <p>{{department.description}} </p>   
                        <button {{action "edit" department target="controller" class="button radius"}}>Edit</button> 
                        <button {{action "remove" department target="controller" class="button radius"}}>Delete</button>
                    {{/if}}
                </div>
                {{/each}}
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="_menu">                
            {{#if user}}
                {{#if user.isAdministrator }}
                    <li >
                        {{#linkTo 'admin.faculties'}}
                            <i class="foundicon-folder"></i> Manage Faculties 
                        {{/linkTo}}
                    </li>
                    <li > 
                        {{#linkTo 'admin.departments'}}
                            <i class="foundicon-folder"></i> Manage Departments 
                        {{/linkTo}}
                    </li>
                    <li > 
                        {{#linkTo 'admin.profiles' }}
                            <i class="foundicon-people"></i> Manage Profiles 
                        {{/linkTo}} 
                    </li>
                {{else}}
                    <li > 
                        {{#linkTo 'feeds' }}
                            <i class="foundicon-inbox"></i> My Feeds 
                        {{/linkTo}}
                    </li>
                    <li > 
                        {{#linkTo 'messages' }}
                            <i class="foundicon-mail"></i> Messages 
                        {{/linkTo}} 
                    </li>
                    <li > 
                        {{#linkTo 'friends' }}
                            <i class="foundicon-people"></i> Friends 
                        {{/linkTo}} 
                    </li>
                    <li > 
                        {{#linkTo 'chats' }}
                            <i class="foundicon-smiley"></i> Chat Rooms 
                        {{/linkTo}}
                    </li>
                {{/if}}
                <li > 
                    {{#linkTo 'user' }}
                        <i class="foundicon-star"></i>View Profile 
                    {{/linkTo}} 
                </li>
                <li > 
                    {{#linkTo 'user.password' }}
                        <i class="foundicon-lock"></i>Change Password 
                    {{/linkTo}}} 
                </li>
                <li > 
                    <a {{action "logout"}}>
                        <i class="foundicon-left-arrow"></i> Logout
                    </a> 
                </li>
            {{else}}
                <li > 
                    {{#linkTo 'index' }}
                        <i class="foundicon-right-arrow"></i>Login
                    {{/linkTo}}} 
                </li>
            {{/if}}
            <li > 
                {{#linkTo 'about' }}
                    <i class="foundicon-website"></i>About
                {{/linkTo}} 
            </li>
        </script>
	</body>
</html>
