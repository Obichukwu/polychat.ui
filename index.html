<!DOCTYPE html>
<html lang="en" >
    <head>
        <meta charset="utf-8" />
        <title>Polychat</title>
        <meta name="description" content="flamez is an educational based social networking application platform.">
        <meta name="author" content="Alexius Odalonu">
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" href="css/normalize.css" />
        <link rel="stylesheet" href="css/foundation.min.css" />
        <link rel="stylesheet" href="css/foundicons.css" />
        <link rel="stylesheet" href="css/crystal.css" />
        <script type="text/javascript" src="phonegap.js"></script>
    </head>
	<body id="emberApp">
        
        <script type="text/javascript" src="js/vendor/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="js/vendor/handlebars-1.0.0.js"></script>
        <script type="text/javascript" src="js/vendor/ember.js"></script>
        <!--<script type="text/javascript" src="js/vendor/ember.fastclick.js"></script>-->
        <script type="text/javascript" src="js/vendor/moment.min.js"></script>

        <script type="text/javascript" src="js/initialzr.js"></script>
        <script type="text/javascript" src="js/models/store.js"></script>
        <script type="text/javascript" src="js/models/models.js"></script>

        <script type="text/javascript" src="js/router.js"></script>
        <script type="text/javascript" src="js/controllers/account.js"></script>
        <script type="text/javascript" src="js/controllers/admin.js"></script>
        <script type="text/javascript" src="js/controllers/user.js"></script>
        <script type="text/javascript">
            document.addEventListener('deviceready', window.onDeviceReady, false);
        </script>

        <script type="text/x-handlebars" id="application">
        <div id="header" class="fixed">
		    <div class="row">
                <div class="small-3 columns text-left"><a class="btn toggle-menu"><i class="foundicon-settings"></i></a></div>
			    <div class="small-6 columns text-center"><img class="logo" src="logo.png" alt="b" style="width:252px; height:46px;" /></div>
                <div class="small-3 columns text-right"></div>
		    </div>
	    </div>

	    <div class="wrapper">
		    <div class="inner">
			    <nav>
				    <ul id="nav-list">
                        {{partial 'menu'}} 
				    </ul>
			    </nav>

			    <div class="main-content">
				    <div id="content" class="row">
                        <div class="large-12 columns">
                            {{outlet}}   
                        </div>
				    </div>	

	                <div id="footer">
                        <div id="content" class="row">
                            <div class="large-12 columns">
		                        <p class="credit">&copy Onajite C. Ika 2013</p>
                            </div>
				        </div>
	                </div>
			    </div>
		    </div>
	    </div>
        </script>

        <script type="text/x-handlebars" id="feeds/index">
            <h2>Feeds</h2>
            <div class="row">
                <div class="large-12 columns">
                    {{view Ember.TextArea placeholder="Shoutout...." valueBinding="newPost"}}
                    {{#if newPostError}} <small class="error">Error, Correct and retry.</small> {{/if}}
                    <button {{action "postNew"}} class="button small radius" style="float:right;">Post</button> 
                </div>
            </div>

            {{#if controller.dataLoaded}}
            <div class="row">
                <div class="large-12 columns ">
                    <ol class="discussion">
                        {{#each post in controller}}
                            <li class="other" {{action 'navigateToDetails' post on='click'}}>
                                {{#if post.isMe }}
                                    <li class="self">
                                        <div class="avatar">
                                            <img src="me.png"/>
                                        </div>
                                {{else}}
                                    <li class="other">
                                        <div class="avatar">
                                            <img src="you.png"/>
                                        </div>
                                {{/if}}
                                <div class="messages messages_fullWidth">
                                    {{#if post.isTextContent}}
                                        <p>{{post.content}}</p>
                                    {{else}}
                                        <img src="data:image/png;base64,{{post.content}}" />
                                    {{/if}}
                                    <time datetime="{{post.postDate}}">{{post.ownername}} ( {{moment_date post.postDate}} )</time>
                                </div>
                            </li>
                        {{else}}
                            <li class="other">
                                <div class="messages">
                                    <p>No Post Exits. Create one</p>
                                </div>
                            </li>
                        {{/each}}
                    </ol>
                </div>
            </div>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>
        
        <script type="text/x-handlebars" id="feeds/feed">
            <h2>Feeds Discussion</h2>
            {{#if controller.dataLoaded}}
            <div class="row">
                <div class="large-12 columns ">
                    <ol class="discussion">
                        {{#if controller.content}}
                            <li class="other">
                                <div class="messages messages_fullWidth">
                                    {{#if controller.content.isTextContent}}
                                        <p>{{controller.content.content}}</p>
                                    {{else}}
                                        <img src="data:image/png;base64,{{controller.content.content}}" />
                                    {{/if}}
                                    <time datetime="{{controller.content.postDate}}">{{moment_date controller.content.postDate}}</time>
                                </div>
                            </li>
                            {{#each discuss in controller.content.discussion}}
                                <li class="self other">
                                    <div class="messages messages_60Width">
                                        <p>{{discuss.note}}</p>
                                        <time datetime="{{discuss.Date}}">{{moment_date discuss.Date}}</time>
                                    </div>
                                </li>
                            {{else}}
                                <li class="self other">
                                    <div class="messages messages_60Width">
                                        <p>No Comments yet! Post one.</p>
                                    </div>
                                </li>
                            {{/each}}
                            <li class="self other">
                                <div class="messages messages_60Width">
                                    {{view Ember.TextArea placeholder="Comment..." valueBinding="newComment"}}
                                    {{#if newCommentError}} <small class="error">Error, Correct and retry.</small> {{/if}}
                                    <button {{action "postComment"}} class="button small radius" style="float:right;">Comment</button> 
                                </div>
                            </li>
                        {{/if}}
                    </ol>
                </div>
            </div>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>
        
        <script type="text/x-handlebars" id="user">
            <h4>Account Info</h4>
            {{outlet}}
        </script>

        <script type="text/x-handlebars" id="user/index">
            <p>About Me</p>
            <div class="panel">
                <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Email</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Email Address" valueBinding="content.email" Readonly="true"}}
                            {{#if content.emailError}} <small class="error">Invalid Email Address</small> {{/if}}
                        </div>
                    </div>                    
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Firstname </span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Firstname" valueBinding="content.firstName"}}
                            {{#if content.firstNameError}} <small class="error">Invalid Firstname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Lastname</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Lastname" valueBinding="content.lastName"}}
                            {{#if content.lastNameError}} <small class="error">Invalid Lastname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Sex</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="gender" valueBinding="content.sex" prompt="Please select your sex"}}
                            {{#if content.sexError}} <small class="error">Invalid Sex</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">About</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextArea placeholder="About Me" valueBinding="content.about"}}
                            {{#if content.aboutError}} <small class="error">Invalid About details</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <button {{action "updateInfo"}} class="button radius">Update</button>
                        </div>
                    </div>
                </form>
            </div>
        </script>

        <script type="text/x-handlebars" id="user/password">
            <p>Change Password</p>
            <div class="panel">
                <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Old Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="oldPassword" type="password"}}
                            {{#if oldPasswordError}} <small class="error">Invalid Old Password</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="newPassword" type="password"}}
                            {{#if newPasswordError}} <small class="error">Invalid New Password</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Confirm Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="newPassword2" type="password"}}
                            {{#if newPasswordError2}} <small class="error">New Password did not match</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <button {{action "updatePassword"}} class="button radius">Update</button>
                        </div>
                    </div>
                </form>
            </div>
        </script>

        <script type="text/x-handlebars" id="messages/index">
            <h2>Messages</h2>
            {{#if controller.dataLoaded}}
            <div class="row">
                <div class="large-12 columns">
                    <ol class="discussion">
                        {{#each message in controller}}
                            <li class="other" {{action 'navigateToDetails' message on='click'}}>
                                <div class="messages messages_fullWidth">
                                    <p>Conversation Between {{message.participant1}} and {{message.participant2}}</p>
                                    <time datetime="{{message.lastMessageDate}}">{{moment_date message.lastMessageDate}}</time>
                                </div>
                            </li>
                        {{else}}
                            <li class="other">
                                <div class="messages messages_fullWidth">
                                    <p>No Private Conversation. Add a friend to create one.</p>
                                </div>
                            </li>
                        {{/each}}
                    </ol>
                </div>
            </div>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="messages/message">
            <div class="row">
                <div class="large-12 columns">
                    <div class="messages messages_fullWidth">
                        <p>Conversation Between {{parentMessage.participant1}} and {{parentMessage.participant2}}</p>
                        <br/>
                        {{view Ember.TextArea placeholder="Shoutout...." valueBinding="newMessage"}}
                        {{#if neewMessageError}} <small class="error">Error, Correct and retry.</small> {{/if}}
                        <button {{action "sendMessage"}} class="button small radius" style="margin-bottom:0;">Send</button> 
                    </div>
                    {{#if controller.dataLoaded}}
                    <ol class="discussion">
                        {{#each discuss in controller}}
                            {{#if discuss.isMe }}
                                <li class="self">
                                    <div class="avatar">
                                        <img src="me.png"/>
                                    </div>
                            {{else}}
                                <li class="other">
                                    <div class="avatar">
                                        <img src="you.png"/>
                                    </div>
                            {{/if}}
                                <div class="messages">
                                    <p>{{discuss.note}}</p>
                                    <time datetime="{{discuss.Date}}">{{moment_date discuss.Date}}</time>
                                </div>
                            </li>
                        {{else}}
                            <li class="other">
                                <div class="messages">
                                    <p>Message not started yet!</p>
                                </div>
                            </li>
                        {{/each}}
                    </ol>
                    {{else}}
                        <div id="spinner" class="preloader"></div>
                    {{/if}}
                </div>
            </div>
        </script>


        <script type="text/x-handlebars" id="friends/index">
            <h2>Friends</h2>
            <div class="row collapse">
                <div class="small-9 large-10 columns">
                    {{view Ember.Select contentBinding="controller.departments" optionValuePath="content.id" optionLabelPath="content.title"
                        valueBinding="controller.selectedDepartmentId" prompt="Please select your department"}}                           
                </div>
                <div class="small-3 large-2 columns">
                    <button {{action "search"}} class="button small radius">Search</button>
                </div>
            </div>

            {{#if controller.searchLoaded}}
                <ol class="discussion">
                {{#each profile in controller}}
		            <li class="other">
                        <div class="messages messages_fullWidth">
			                <h5>{{profile.firstName}} {{profile.lastName}} ({{profile.email}} )</h5>
                            <p>{{profile.about}} </p>   
                            <button {{action "message" profile}} class="button small radius">Message</button>
                        <div>
                    <li>
                {{else}}
                    <li class="other">
                        <div class="messages messages_fullWidth">
                            <p>No profile Exits in department</p>
                        </div>
                    </li>
                {{/each}}
                </ol>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="chats/index">
            <h4>Chat Rooms</h4>
            {{#if controller.dataLoaded }}
            <ol class="discussion">
                {{#each department in controller}}
                <li class="other" {{action 'enterRoom' department on='click'}}>
                    <div class="messages messages_fullWidth">
                        <h5> {{department.title}}</h5>
                        <p>{{department.description}} </p>   
                    </div>
                </li>
                {{else}}
                    <li class="other">
                        <div class="messages messages_fullWidth">
                            <p>No Chatroom Exits. Report to Admin</p>
                        </div>
                    </li>
                {{/each}}
                </ol>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>
        
        <script type="text/x-handlebars" id="chats/chat">
            <div class="row">
                <div class="large-12 columns">
                    <div class="messages messages_fullWidth">
                        <p>{{controller.department.Title}} Chatroom</p>
                        <br/>
                        {{view Ember.TextArea placeholder="Message...." valueBinding="newMessage"}}
                        {{#if neewMessageError}} <small class="error">Error, Correct and retry.</small> {{/if}}
                        <button {{action "sendMessage"}} class="button small radius" style="margin-bottom:0;">Send</button> 
                    </div>
                    {{#if controller.dataLoaded}}
                    <ol class="discussion">
                        {{#each discuss in controller}}
                            {{#if discuss.isMe }}
                                <li class="self">
                                    <div class="avatar">
                                        <img src="me.png"/>
                                    </div>
                            {{else}}
                                <li class="other">
                                    <div class="avatar">
                                        <img src="you.png"/>
                                    </div>
                            {{/if}}
                                <div class="messages">
                                    <p>{{discuss.note}}</p>
                                    <time datetime="{{discuss.Date}}">{{moment_date discuss.Date}}</time>
                                </div>
                            </li>
                        {{else}}
                            <li class="other">
                                <div class="messages">
                                    <p>Chat not started yet!</p>
                                </div>
                            </li>
                        {{/each}}
                    </ol>
                    {{else}}
                        <div id="spinner" class="preloader"></div>
                    {{/if}}
                </div>
            </div>
        </script>


        <script type="text/x-handlebars" id="about">
            <h4>About</h4>
            <div class="panel">
                <p>Look all around you, there exists various social network platforms that engages you and occupy your time.</p>
                <p>If you find yourself asking this question "what had social network give to me?"</p>
                <p>This app is for you. This is the education revolution!</p>
            </div>
        </script>

        <script type="text/x-handlebars" id="index">
            <h2 class="heading">Accounts {{#unless viewMode}} Login {{else}} Register {{/unless}}</h2>
            {{#unless viewMode}}
                <p>Enter username and password to gain access to the system.</p>
                <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Email</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Email Address" valueBinding="content.email"}}
                            {{#if content.emailError}} <small class="error">Invalid Email Address</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="content.password" type="password"}}
                            {{#if content.passwordError}} <small class="error">Invalid Password</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <a {{action "SwitchView" 1 target="controller"}} class="button small radius" >Register</a>
                            <button {{action "login"}} class="button small radius" >Login</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <button {{action "easyLogin" 1}} class="button small radius">Easy Admin</button>
                            <button {{action "easyLogin" 2}} class="button small radius">Easy User</button>
                        </div>
                    </div>
                </form>    
            {{else}}
                <p>Enter all information to create a account.</p>
                <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Email</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Email Address" valueBinding="content.email"}}
                            {{#if content.emailError}} <small class="error">Invalid Email Address</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="content.password" type="password"}}
                            {{#if content.passwordError}} <small class="error">Invalid Password</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Confirm Password</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Password" valueBinding="content.password2" type="password"}}
                            {{#if content.password2Error}} <small class="error">Password did not match</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Department</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="controller.departments" optionValuePath="content.id" optionLabelPath="content.title"
                                valueBinding="content.departmentId" prompt="Please select your department"}}
                            {{#if content.departmentIdError}} <small class="error">Please select a valid department</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Firstname </span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Firstname" valueBinding="content.firstName"}}
                            {{#if content.firstNameError}} <small class="error">Invalid Firstname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Lastname</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Lastname" valueBinding="content.lastName"}}
                            {{#if content.lastNameError}} <small class="error">Invalid Lastname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Sex</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="gender" valueBinding="content.sex" prompt="Please select your sex"}}
                            {{#if content.sexError}} <small class="error">Invalid Sex</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">About</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextArea placeholder="About Me" valueBinding="content.about"}}
                            {{#if content.aboutError}} <small class="error">Invalid About details</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                        <div class="small-12 large-12 text-right columns">
                            <a {{action "SwitchView" 0 target="controller"}} class="button small radius" >Login</a>
                            <button {{action "register"}} class="button small radius">Register</button>
                        </div>
                    </div>
                </form>
            {{/unless}}
        </script>

        <script type="text/x-handlebars" id="admin">
            {{outlet}}
        </script>

        <script type="text/x-handlebars" id="admin/faculties">
            <h4>Manage Schools</h4>  
            {{#if controller.dataLoaded }}
            <button {{action "create" target="controller"}} class="button small radius">Create</button>
            <ol class="discussion">
                {{#each faculty in controller}}
                <li class="other">
                    <div class="messages messages_fullWidth">
                    {{#if faculty.isEditing }}
                    <form>
                       <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Title</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="title" valueBinding="controller.editTitle"}}
                          </div>
                        </div>
                         <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Description</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextArea placeholder="description" valueBinding="controller.editDescription"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                              <button {{action "save" faculty target="controller" }} class="button small radius" >Save</button>
                              <button {{action "cancel" faculty target="controller" }} class="button small radius">Cancel</button>
                          </div>
                        </div>
                    </form>
                    {{else}}
                        <h5>{{faculty.title}} </h5>
                        <p>{{faculty.description}} </p>   
                        <button {{action "edit" faculty target="controller"}} class="button small radius">Edit</button> 
                        <button {{action "remove" faculty target="controller"}} class="button small radius">Delete</button>
                    {{/if}}
                 </div>
                </li>
                {{else}}
                    <li class="other">
                        <div class="messages messages_fullWidth">
                        <p>No Faculty Exits. Create one</p>
                        </div>
                    </li>
                {{/each}}
                </ul>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="admin/departments">
            <h4>Manage Departments</h4>
            {{#if controller.dataLoaded }}
            <button {{action "create" target="controller"}} class="button small radius">Create</button>
            <ol class="discussion">
                {{#each department in controller}}

                <li class="other">
                    <div class="messages messages_fullWidth">
                    {{#if department.isEditing }}
                    <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Faculty</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="controller.faculties" optionValuePath="content.id" optionLabelPath="content.title"
                                valueBinding="controller.editFacultyId"}}
                          </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Title</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="title" valueBinding="controller.editTitle"}}
                          </div>
                        </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Description</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextArea placeholder="description" valueBinding="controller.editDescription"}}
                          </div>
                        </div>
                        <div class="row">
                          <div class="large-12 columns">
                              <button {{action "save" department target="controller" }} class="button small radius">Save</button>
                              <button {{action "cancel" department target="controller"}} class="button small radius">Cancel</button>
                          </div>
                        </div>
                    </form>
                    {{else}}
                        <h5> {{department.title}}</h5>
                        <p>{{department.description}} </p>   
                        <button {{action "edit" department target="controller" }} class="button small radius">Edit</button> 
                        <button {{action "remove" department target="controller"}} class="button small radius">Delete</button>
                    {{/if}}
                </div>
                </li>
                {{else}}
                    <li class="other">
                        <div class="messages messages_fullWidth">
                            <p>No Department Exits. Create one</p>
                        </div>
                    </li>
                {{/each}}
                </ol>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="admin/profiles">
            <h4>Manage Profiles</h4>
            {{#if controller.dataLoaded }}
                <button {{action "create" target="controller"}} class="button small radius">Create</button>
                <ol class="discussion">
                {{#each profile in controller}}

                <li class="other">
                    <div class="messages messages_fullWidth">
                    {{#if profile.isEditing }}
                    <form>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Department</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="controller.departments" optionValuePath="content.id" optionLabelPath="content.title"
                                valueBinding="controller.currentEdit.departmentId" prompt="Please select your department"}}
                            {{#if content.departmentIdError}} <small class="error">Please select a valid department</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Role</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="roles" optionValuePath="content.id" optionLabelPath="content.title" 
                                valueBinding="controller.currentEdit.roleId" prompt="Please select your role"}}
                            {{#if content.roleIdError}} <small class="error">Invalid Role</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Firstname </span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Firstname" valueBinding="controller.currentEdit.firstName"}}
                            {{#if content.firstNameError}} <small class="error">Invalid Firstname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Lastname</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Lastname" valueBinding="controller.currentEdit.lastName"}}
                            {{#if content.lastNameError}} <small class="error">Invalid Lastname</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Email</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Email" valueBinding="controller.currentEdit.email"}}
                            {{#if content.lastNameError}} <small class="error">Invalid Email</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Phone</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextField placeholder="Phone" valueBinding="controller.currentEdit.phone"}}
                            {{#if content.lastNameError}} <small class="error">Invalid Phone Number</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">Sex</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.Select contentBinding="gender" valueBinding="controller.currentEdit.sex" prompt="Please select your sex"}}
                            {{#if content.sexError}} <small class="error">Invalid Sex</small> {{/if}}
                        </div>
                    </div>
                    <div class="row collapse">
                        <div class="small-3 large-2 columns">
                          <span class="prefix">About</span>
                        </div>
                        <div class="small-9 large-10 columns">
                            {{view Ember.TextArea placeholder="About Me" valueBinding="controller.currentEdit.about"}}
                            {{#if content.aboutError}} <small class="error">Invalid About details</small> {{/if}}
                        </div>
                    </div>
                    <div class="row">
                          <div class="large-12 columns">
                              <button {{action "save" profile target="controller" }} class="button small radius" >Save</button>
                              <button {{action "cancel" profile target="controller"}} class="button small radius" >Cancel</button>
                          </div>
                        </div>
                    </form>
                    {{else}}
                        <h5>{{profile.firstName}} {{profile.lastName}} ({{profile.email}} )</h5>
                        <p>{{profile.about}} </p>   
                        <button {{action "edit" profile target="controller"}} class="button small radius">Edit</button> 
                        <button {{action "remove" profile target="controller"}} class="button small radius">Delete</button>
                    {{/if}}
                    </div>
                </li>
                {{else}}
                    <li class="other">
                        <div class="messages messages_fullWidth">
                            <p>No profile Exits. Create one</p>
                        </div>
                    </li>
                {{/each}}
                </ol>
            {{else}}
                <div id="spinner" class="preloader"></div>
            {{/if}}
        </script>

        <script type="text/x-handlebars" id="_menu">                
            {{#if user}}
                {{#if user.isAdministrator }}
                    <li >
                        {{#linkTo 'admin.faculties'}}
                            <i class="foundicon-folder"></i> Manage Schools 
                        {{/linkTo}}
                    </li>
                    <li > 
                        {{#linkTo 'admin.departments'}}
                            <i class="foundicon-folder"></i> Manage Departments 
                        {{/linkTo}}
                    </li>
                    <li > 
                        {{#linkTo 'admin.profiles' }}
                            <i class="foundicon-people"></i> Manage Profiles 
                        {{/linkTo}} 
                    </li>
                {{else}}
                    <li > 
                        {{#linkTo 'feeds' }}
                            <i class="foundicon-inbox"></i> My Feeds 
                        {{/linkTo}}
                    </li>
                    <li > 
                        {{#linkTo 'messages' }}
                            <i class="foundicon-mail"></i> Messages 
                        {{/linkTo}} 
                    </li>
                    <li > 
                        {{#linkTo 'friends' }}
                            <i class="foundicon-people"></i> Friends 
                        {{/linkTo}} 
                    </li>
                    <li > 
                        {{#linkTo 'chats' }}
                            <i class="foundicon-smiley"></i> Chat Rooms 
                        {{/linkTo}}
                    </li>
                {{/if}}
                <li > 
                    {{#linkTo 'user' }}
                        <i class="foundicon-star"></i>View Profile 
                    {{/linkTo}} 
                </li>
                <li > 
                    {{#linkTo 'user.password' }}
                        <i class="foundicon-lock"></i>Change Password 
                    {{/linkTo}} 
                </li>
                <li > 
                    <a {{action "logout"}}>
                        <i class="foundicon-left-arrow"></i> Logout
                    </a> 
                </li>
            {{else}}
                <li > 
                    {{#linkTo 'index' }}
                        <i class="foundicon-right-arrow"></i>Login
                    {{/linkTo}} 
                </li>
            {{/if}}
            <li > 
                {{#linkTo 'about' }}
                    <i class="foundicon-website"></i>About
                {{/linkTo}} 
            </li>
        </script>
	
    </body>
</html>
